---
description: 기능 구현을 위한 계획 수립 및 작업 파일 생성 (대화형)
allowed-tools: ["Bash", "Write", "Read", "Glob", "Grep"]
model: claude-3-5-sonnet-20241022
argument-hint: <feature-name>
---

# Feature Planning Protocol (Interactive Mode)

**목표**: 사용자와 대화하며 상세 구현 계획을 수립하고, 세부 작업 파일까지 모두 생성합니다.

## Input Parsing

`$1` = 기능명 (feature_name)

- 띄어쓰기 대신 **하이픈(-)**을 사용하세요
- 예: `auth-system`, `user-dashboard`, `payment-gateway`

## Step 1: 요구사항 수집 (Interactive)

**기능명만 입력된 경우** (`$2`가 비어있음):

사용자에게 다음을 질문하십시오:

```
📋 $1 기능을 계획합니다.

상세 요구사항을 알려주세요:
- 어떤 기능이 필요한가요?
- 주요 사용자 시나리오는?
- 특별히 고려할 기술적 제약이 있나요?
```

**상세 요구사항이 함께 입력된 경우**:

- `$ARGUMENTS`에서 `$1`(기능명)을 제외한 나머지를 요구사항으로 사용

## Step 2: Context Loading

1. 프로젝트 규칙 참조: `@CLAUDE.md` (기술 스택 확인)
2. 현재 Git 상태 확인: `!git status`
3. 관련 기존 코드 탐색: 요구사항과 관련된 파일들을 검색

## Step 3: Analysis & Planning

사용자의 요구사항을 분석하고:

- 구현에 필요한 파일 변경 목록 도출
- 기존 코드와의 통합 방안 검토
- 잠재적 위험 요소 식별
- **구현 단계를 세부 작업으로 분할** (01, 02, 03...)

## Step 4: Scaffolding

```bash
mkdir -p TODO/$1
```

## Step 5: Artifact Generation

다음 파일들을 **모두 반드시** 생성하십시오:

### A. TODO/$1/PLAN.md

```markdown
# $1 구현 계획

## 개요

{요구사항 요약}

## 목표

- [ ] 목표 1
- [ ] 목표 2

## 구현 단계

### Phase 1: {단계명}

- 작업 파일: 01.md
- 내용 요약

### Phase 2: {단계명}

- 작업 파일: 02.md
- 내용 요약

### Phase N: ...

## 영향받는 파일

- `path/to/file1.ts` - 변경 사유

## 기술적 고려사항

- 의존성, 호환성, 성능 등
```

### B. TODO/$1/requirements.md

```markdown
# $1 요구사항 명세

## 원본 요청

{사용자가 입력한 요구사항 전체}

## 분석된 요구사항

1. ...
2. ...

## 수용 기준 (Acceptance Criteria)

- [ ] 기준 1
- [ ] 기준 2
```

### C. TODO/$1/checklist.md

```markdown
# $1 품질 체크리스트

## 기능 요구사항

- [ ] {요구사항에서 도출한 항목 1}
- [ ] {요구사항에서 도출한 항목 2}
- [ ] ...

## 코드 품질

- [ ] 린트 통과 (npm run lint)
- [ ] 테스트 통과 (npm run test)
- [ ] 타입 검사 통과

## 검증

- [ ] 수동 테스트 완료
- [ ] 엣지 케이스 처리 확인
```

### D. TODO/$1/progress.md

```markdown
# $1 진행 상황

## 현재 상태: 🟡 계획 수립 완료

### 타임라인

- [{현재 날짜/시간}] Planning Completed. Ready to start.

### 작업 현황

| 작업  | 상태    | 완료 시간 |
| ----- | ------- | --------- |
| 01.md | ⏳ 대기 | -         |
| 02.md | ⏳ 대기 | -         |
| ...   | ...     | ...       |

### 완료율

- 체크리스트: 0/{총 항목 수} (0%)
```

### E. TODO/$1/01.md, 02.md, ... (세부 작업 파일)

**각 구현 단계마다 별도의 작업 파일을 생성하십시오:**

```markdown
# 작업 01: {작업 제목}

## 목표

{이 작업에서 달성할 구체적인 목표}

## 상세 지시사항

1. {구체적인 구현 단계 1}
2. {구체적인 구현 단계 2}
3. ...

## 예상 변경 파일

- `path/to/file.ts` - {변경 내용}

## 완료 기준

- [ ] {이 작업의 완료 조건 1}
- [ ] {이 작업의 완료 조건 2}

## 참고사항

- {주의할 점, 의존성 등}
```

**작업 파일 작성 규칙:**

- 각 작업은 독립적으로 실행 가능해야 함
- 한 작업에서 너무 많은 것을 하지 않도록 적절히 분할
- 이전 작업의 결과에 의존하는 경우 명시

## Step 6: Conclusion

```
✅ 계획이 수립되었습니다.

📁 TODO/$1/
├── PLAN.md         - 구현 계획
├── requirements.md - 요구사항 명세
├── checklist.md    - 품질 체크리스트 ({N}개 항목)
├── progress.md     - 진행 상황
├── 01.md           - {작업 1 제목}
├── 02.md           - {작업 2 제목}
└── ...

다음 명령어:
  /do-task $1       - 작업 시작
  /do-progress $1   - 진행 상황 확인
```
