---
description: ë³€ê²½ì ì„ ë¶„ì„í•˜ì—¬ ìš”ì•½í•˜ê³  ìë™ìœ¼ë¡œ git commit ìƒì„±
allowed-tools: ["Bash", "Read", "Edit"]
model: claude-3-5-sonnet-20241022
argument-hint: [feature-name] [--amend]
---

# Auto Commit Protocol

**ëª©í‘œ**: í˜„ì¬ ë³€ê²½ì‚¬í•­ì„ ë¶„ì„í•˜ì—¬ ì˜ë¯¸ ìˆëŠ” ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ìƒì„±í•˜ê³  ìë™ìœ¼ë¡œ ì»¤ë°‹í•©ë‹ˆë‹¤.

## Input Parsing

- `$1` (ì„ íƒ): íŠ¹ì • ê¸°ëŠ¥ê³¼ ì—°ê²°í•  ê²½ìš° ì§€ì •
- `--amend` (ì„ íƒ): ë§ˆì§€ë§‰ ì»¤ë°‹ì— ì¶”ê°€ (ì£¼ì˜í•´ì„œ ì‚¬ìš©)

## Execution Steps

### 1. ë³€ê²½ì‚¬í•­ ìˆ˜ì§‘

```bash
# ë³€ê²½ëœ íŒŒì¼ ëª©ë¡
git status --porcelain

# ìŠ¤í…Œì´ì§•ëœ ë³€ê²½ì‚¬í•­ ìƒì„¸
git diff --cached

# ìŠ¤í…Œì´ì§•ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­
git diff

# ìƒˆë¡œ ì¶”ê°€ëœ íŒŒì¼ ë‚´ìš© (untracked)
git status --porcelain | grep "^??" | cut -c4-
```

### 2. ë³€ê²½ì‚¬í•­ ë¶„ì„

- **ë³€ê²½ ìœ í˜• ë¶„ë¥˜**: feat, fix, refactor, docs, test, chore, style
- **ì˜í–¥ ë²”ìœ„**: ì–´ë–¤ ëª¨ë“ˆ/ì»´í¬ë„ŒíŠ¸ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€
- **ë³€ê²½ ëª©ì **: ì™œ ì´ ë³€ê²½ì´ í•„ìš”í–ˆëŠ”ì§€

### 3. ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„±

Conventional Commits í˜•ì‹:

```
<type>(<scope>): <subject>

<body>

<footer>
```

**ì˜ˆì‹œ:**

```
feat(auth): JWT ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„

- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- ë¦¬í”„ë ˆì‹œ í† í° ë¡œì§ êµ¬í˜„
- ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ì ìš©

Related: TODO/auth-system
```

### 4. ì‚¬ìš©ì í™•ì¸

```
ğŸ“ ì»¤ë°‹ ìš”ì•½
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
íƒ€ì…: {type}
ë²”ìœ„: {scope}
ì œëª©: {subject}

ë³€ê²½ íŒŒì¼:
  M  src/auth/login.ts
  A  src/auth/token.ts
  D  src/old-auth.ts

ë©”ì‹œì§€:
{ì „ì²´ ì»¤ë°‹ ë©”ì‹œì§€}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ëŒ€ë¡œ ì»¤ë°‹í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ê³„ì† ì§„í–‰í•©ë‹ˆë‹¤)
```

### 5. ì»¤ë°‹ ì‹¤í–‰

```bash
git add -A
git commit -m "{ì»¤ë°‹ ë©”ì‹œì§€}"
```

**--amend ì˜µì…˜:**

```bash
git commit --amend -m "{ìˆ˜ì •ëœ ì»¤ë°‹ ë©”ì‹œì§€}"
```

### 6. feature_nameì´ ì§€ì •ëœ ê²½ìš°

`TODO/$1/progress.md`ì— ì»¤ë°‹ ì •ë³´ ê¸°ë¡:

```markdown
- [{í˜„ì¬ ë‚ ì§œ/ì‹œê°„}] Commit: {ì»¤ë°‹ í•´ì‹œ ì• 7ìë¦¬} - {ì»¤ë°‹ ì œëª©}
```

### 7. ê²°ê³¼ ë³´ê³ 

```
âœ… ì»¤ë°‹ ì™„ë£Œ

ì»¤ë°‹ í•´ì‹œ: {hash}
ë¸Œëœì¹˜: {current_branch}
ë©”ì‹œì§€: {subject}

ë³€ê²½ í†µê³„:
  {n} files changed, {insertions} insertions(+), {deletions} deletions(-)

ë‹¤ìŒ ë‹¨ê³„:
  git push origin {branch}  # ì›ê²©ì— í‘¸ì‹œ
  /do-deploy                # ë°°í¬ ì‹¤í–‰
```

## Safety Rules

- **ì ˆëŒ€ --force ì˜µì…˜ ì‚¬ìš© ê¸ˆì§€**
- **main/master ë¸Œëœì¹˜ì—ì„œëŠ” --amend ì‚¬ìš© ì „ ê²½ê³ **
- **ë¯¼ê°í•œ íŒŒì¼ (.env, credentials ë“±) í¬í•¨ ì‹œ ê²½ê³  í›„ ì œì™¸**
